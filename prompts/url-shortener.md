How do you design a URL shortening web service like tinyurl or bit.ly?

You are given a long URL, how would you design a service that would generate a shorter and unique alias for it? If you are not familiar with URL shortener service have a look at some of the popular ones like bit.ly or tinyurl.com

